extends ../layout

block style
  link(href='/style/videoSpecific/comments.css' rel='stylesheet')
  link(href='/style/videoSpecific/video-specific.css' rel='stylesheet')
  link(href='/style/videoSpecific/description.css' rel='stylesheet')
  link(href="https://fonts.googleapis.com/css?family=Oxanium&display=swap" rel="stylesheet")


block content

  //SIDE BAR FOR VIDEOS
  if videos
    #sidebar
      each vid in videos
        .video-preview
            a(href=`/video/${vid.id}`)
              video(src=`/videos/${vid.videoURL}#t=10` volume=0.5)
              #svidinfo
                h1= vid.formattedTitle
                h2= vid.uploader
                h3= `${vid.formattedViews} Views`
                h3= vid.formattedUploadDate
  else
    h1= `No videos yet`

  #other-content
    if video
      video#video(src=`/videos/${video.videoURL}` autoplay controls)
      #videocontent
        p#videoTitle= video.title
        #videoinfo
          p= `${video.viewCount} Views`
          #subinfo
            a#userName(href=`/users/${uploader.username}`)= `${uploader.username}`
            if uploader.subscriberCount == 1
              p#subCount= `${uploader.formattedSubscriberCount} Subscriber`
            else
              p#subCount= `${uploader.formattedSubscriberCount} Subscribers`
          #voting
            p#upvoteCount= `${video.upvotes}`
            button#upVote(onclick="processVideoVote(this)")= 'üëç'
            p#downvoteCount= `${video.downvotes}`
            button#downVote(onclick="processVideoVote(this)")= `üëé`
          if subscribed
            button#subscribeButton(onClick="processSubscribe()")= `Unsubscribe`
          else
            button#subscribeButton(onClick="processSubscribe()")= `Subscribe`
          
        button#bookmark(onClick="processBookmark()")= "Bookmark Video"
        
        button#descButton(onClick="toggleDescription()")= "Show Description"
        #description-info
          h3#date= `Uploaded on ${video.formattedDate}`
          h3= `Description`
          p#description= video.description
          h3= `Tags`
          p#tags= video.tags

      if username
        #comment-form
          p= "Comment:" 
          textarea#comment(name='comment')
          button#post-comment(onClick="postComment()")= "Post"
      else
        h3= "You need to log in to be able to post comments"
    
    include comments

block script
  script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js")
  script(src='/js/video-specific.js')
  script(src='/js/votes.js')